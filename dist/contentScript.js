!function(){"use strict";let e,o=null;console.log("Content script running"),chrome.runtime.onMessage.addListener(((n,l,t)=>{console.log("Message received in content script:",n),console.log("From sender:",l),"CHOOSE_VIDEO_SOURCE"===n.type?(console.log("Choosing video source..."),new Promise((e=>{console.log("Choosing video source...");const n=document.querySelectorAll("video");if(0===n.length)return console.log("No video elements found on this page."),void e(null);console.log(`Found ${n.length} video element(s):`),n.forEach(((l,t)=>{console.log(`Video ${t+1}:`,l);const s=document.createElement("div");s.classList.add("video-overlay");const c=l.getBoundingClientRect();s.style.left=`${c.left+window.scrollX}px`,s.style.top=`${c.top+window.scrollY}px`,s.style.width=`${c.width}px`,s.style.height=`${c.height}px`,document.body.appendChild(s),l.addEventListener("mouseenter",(()=>{console.log("Mouse entered video"),s.style.backgroundColor="rgba(8, 166, 246, 0.45)"})),l.addEventListener("mouseleave",(()=>{console.log("Mouse left video"),s.style.backgroundColor="rgba(8, 166, 246, 0.65)"})),l.addEventListener("click",(()=>{console.log("Video clicked:",l),e(l),s.remove(),o=l,n.forEach((e=>{e.replaceWith(e.cloneNode(!0))}))}),{once:!0})}))})).then((o=>{o?(e=o,console.log("Video source chosen:",o),chrome.runtime.sendMessage({type:"VIDEO_SOURCE_CHOSEN"})):console.log("No video source selected.")}))):"START_TRACKING"===n.type?(console.log("Starting puck tracking..."),console.log("Tracking puck...")):"STOP_TRACKING"===n.type?console.log("Stopping puck tracking..."):"RESET"==n.type&&(console.log("Resetting Popup UI"),e=null,chrome.runtime.sendMessage({type:"VIDEO_SOURCE_RESET"}))}))}();